
<% 

    let var_local="http://localhost:5000/"

    let name = typeof data_product.name != "undefined" ?  data_product.name : "";
    let name_english = typeof data_product.name_english != "undefined" ?  data_product.name_english : "";
    let quantity = typeof data_product.quantity != "undefined" ?  data_product.quantity : "";
    let describe = typeof data_product.describe != "undefined" ?  data_product.describe : "1";
    let price = typeof data_product.price != "undefined" ?  data_product.price : "";

    let image = typeof data_product.image != "undefined" ?  data_product.image : "";
    let image_extention = typeof data_product.image.extention != "undefined" ?  data_product.image.extention : "";
    let image_namefile = typeof data_product.image.name_file != "undefined" ?  data_product.image.name_file : "";

    let id_cate = typeof data_product.id_cate != "undefined" ?  data_product.id_cate : "";

let saveArray=data_cate.map(currenValue =>{
    
    if(currenValue._id.toString() == id_cate.toString()){
     return  ` <option value="${currenValue._id}" selected >${currenValue.name}</option>`
    }
        return `
        <option value="${currenValue._id}" >${currenValue.name}</option>
    `
    
}).join("")
%> 

<section style="max-width: 770px; margin: 0 auto;">


<div class="col-md-12 col-lg-12">
<h4 class="mb-3">Billing address</h4>
<img src="<%- var_local+image.name_file %>" style="max-width: 200px;" class="rounded mx-auto d-block" alt="...">
<form action="/product/<%- data_product._id %>/update?_method=PUT" class="needs-validation"  method="POST" enctype="multipart/form-data" >
<div class="row g-3">

  <div class="col-sm-6">
    <label for="firstName" class="form-label">name</label>
    <input type="text" class="form-control" id="firstName" placeholder="" value="<%- name %>" name="name" required>
    <div class="invalid-feedback">
      Valid first name is required.
    </div>
  </div>

  <div class="col-sm-6">
    <label for="lastName" class="form-label">name_english</label>
    <input type="text" class="form-control" id="lastName" placeholder="" value="<%- name_english %>" name="name_english" required>
    <div class="invalid-feedback">
      Valid last name is required.
    </div>
  </div>
  <div class="col-12">
    <label for="email" class="form-label">quantity <span class="text-muted">(Optional)</span></label>
    <input type="number" class="form-control" id="email" name="quantity" value="<%- quantity %>" placeholder="quantity..." required>
    <div class="invalid-feedback">
      Please enter a valid email address for shipping updates.
    </div>
  </div>

  <div class="col-12">
    <label for="address" class="form-label">price</label>
    <input type="number" class="form-control" id="address" name="price" value="<%- price %>" min="1" placeholder="price..." required>
    <div class="invalid-feedback">
      Please enter your shipping price.
    </div>
  </div>
  <div class="mb-3">
    <label for="formFile" class="form-label">Image Product</label>
    <input class="form-control" type="file" id="formFile"  name="image">
    <!-- <input  type="hidden"   name="extention" value="<%- image_extention %>">
    <input type="hidden"   name="name_file" value="<%- image_namefile %>"> -->
  </div>
<hr class="my-4">

<div class="mb-3">
    <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" name="id_cate">
       <option  >Select Category</option>
       <%- saveArray %> 
      </select>
  </div>
  
  <div class="form-floating col-sm-12">
    <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea" name="describe"><%- describe %></textarea>
    <label for="floatingTextarea">Describe</label>
  </div>

<button class="w-100 btn btn-primary btn-lg" type="submit">Continue to Sign up</button>
 <a href="/product" class="btn btn-primary" style="width: auto;">List Product</a>
</form>
</section>